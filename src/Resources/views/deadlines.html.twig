{% extends "@RavuAlHemioTotstrich/base.html.twig" %}

{% block title %}Deadlines{% endblock %}

{% block body %}
    <form action="{{ path('add_deadline') }}" method="post">
        <table class="deadlines">
            <tr class="invisible-header-row">
                <th>Description</th>
                <th>Deadline</th>
                <th>Interval</th>
                <th>Actions</th>
            </tr>
            <tr class="insertion-row">
                <td><input type="text" name="description" title="Description" placeholder="EProg Ãœbung 3" /></td>
                <td><input type="text" name="deadline" title="Deadline" placeholder="10.4. 10:40" /></td>
                <td></td>
                <td><button class="add">&#10133;</button></td>
            </tr>
            {% for deadline in deadlines %}
                <tr class="deadline {% if deadline.isComplete %}complete{% elseif deadline.isOverdue %}overdue{% else %}pending{% endif %}">
                    <td>{{ deadline.description | escape }}</td>
                    <td>{{ deadline.deadline | escape }}</td>
                    <td>{{ deadline.interval | escape }}</td>
                    <td>
                        <a href="{{ path('show_deadline_editor', {'numID': deadline.id}) }}">&#128393;</a>
                        <button class="complete" type="submit" form="deadline-{{ deadline.id }}-completion-form">&#10004;</button>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </form>
    {% for deadline in deadlines %}
        <form id="deadline-{{ deadline.id }}-completion-form" action="{{ path('complete_deadline', {'numID': deadline.id}) }}" method="post"></form>
    {% endfor %}
{% endblock %}
